class: middle center

# Lua 102

## Did you ask for more awesome?

---

# Functions

A *function* is a block of code to which we gave a name, and which can be executed from somewhere else in the program. A function can have *parameters* (inputs) and *return values* (outputs).

Functions are useful for:

- code reuse (write once, use many times)
- encapsulation (separate various problems into distinct pieces of code)
- abstraction (solve a problem for a generic input)

---

# Functions (2)

Function definition syntax:

```lua
function identifier(parameters)
    -- statements
end
```

where `parameters` is a comma separated list of identifiers, possibly empty.

Function call syntax:

```lua
functionName(arguments)
```

where `arguments` is a comma separated list of expressions, possibly empty.

---

# Functions (3)

Simplest case: no parameters, no return values (only *side effects*):

```lua
function foo()
    a = 5
    print("I did it!")
end

print(a)    -- nil
foo()       -- I did it!
print(a)    -- 5
```

Most useful as statement (but can be called as `nil` valued expressions):

```lua
b = foo()   -- will set a and print "I did it!"
print(a,b)  -- 5    nil
```

---

# Functions (4)

Arguments are passed "by value" (copied):

```lua
function printDouble(n)
    n = n * 2
    print(n)
end

a = 10
printDouble(a)  -- 20
print(a)        -- 10
```

More on that later.

---

# Functions (5)

Purest case: no side effects ("pure function")

```lua
function square(n)
    return n*n
end

function squareSum(x,y)
    return square(x) + square(y)
end

print(square(10))       -- 100
print(squareSum(3,4))   -- 25
```

Most useful as expressions (but can be called as statement):

```lua
square(2)   -- did the computation, discarded the result
```

---

# Functions (6)

Multiple return values: comma separated expressions

```lua
function foo()
    return "Foo", "Bar"
end

a, b = foo()

print(a, b) -- "Foo    Bar"
```

---

# Functions (7)

Can put a `return` statement at the end of any block. Control immediately returned to caller.

```lua
function isOdd(n)
    if n % 2 == 1 then
        return true
    else
        return false
    end
end

-- or:

function isOdd(n)
    if n % 2 == 1 then
        return true
    end

    return false
end
```

When the program reaches the end of a function without finding a `return` statement, it automatically returns `nil`.

---

# Lexical scoping

