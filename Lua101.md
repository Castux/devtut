class: middle center

# Lua 101

## Crash course in awesomeness!

---

# Contents

---

# Running the interpreter

- Lua source usually in `source.lua` files
- From the command line: `lua source.lua`
- From a menu (or shortcut) in a Lua-friendly text editor
    - `Tools -> Build` or `Ctrl-B` in Sublime Text
- One program = one Lua file (for now)
- Interpreter reads the whole file and executes it line by line

For very small tests: interactive Lua interpretor

- Windows: Start menu -> search for Lua -> "Lua (Command Line)"
- Others: run `lua` in a terminal

---

# Comments and whitespace

Comments: start with `--`, end at the end of line

- documenting
- separating sections in code
- disabling code temporarily

```lua
-- Here we print some things:
print("Hello world") -- the first thing
print("This is great") -- the second thing
-- print("Not this!")
```

Spaces, tabs and new lines ignored:

```lua
print(       "Hello world"
)print("This is great"          )
```

Good style: one instruction per line, consistent spacing

---

# Basic output: `print()`

An instruction to print something to the console. Used mostly to:

- explain what is going on
- show the result of a computation

```lua
print("Hello, user!")
print("I will now print 5:")
print(5)
print("I'm done, bye!")
```

Can also print several things on the same line (separate them with commas):

```lua
print("The result was", 5, "and I had a blast!")
```

---

# Numbers

The most basic *type* of data you can use in Lua:

```lua
-- let's print some numbers:

print(123)
print(-2)
print(45.024)
print(-999999999.9)
```

Not that fascinating... Let's actually use the CPU.

---

# Basic number operations

| Operation      | Math notation | Symbol |
|----------------|---------------|--------|
| Addition       | +             | `+`    |
| Substraction   | -             | `-`    |
| Multiplication | × or ⋅        | `*`    |
| Division       | /, ÷ or —     | `/`    |

```lua
-- Lua as a simple calculator:

print(3 + 18.5)
print(20 - 5)
print(2763 * 47684)
print(60 / 4)
```

---

# Bigger operations

Can chain the operations as much as you want:

```lua
print(2 + 4 + 6 - 7 + 10 - 8 + 9)
print(3 * 4 * 10 / 2 * 5 / 10)
```

Like in math, `*` and `/` are applied before `+` and `-`:

```lua
print(3 + 4 * 6)    -- 27
```

Like in math, use parentheses `(` and `)` to force the order:

```lua
print((3 + 4) * 6)  -- 42

-- average of 5 numbers:
print((2 + 7 + 4 + 10 + 6) / 5)
```

---

# Comparing numbers

Checking if numbers are equal or different:

| Comparison       | Math notation | Symbol |
|------------------|---------------|--------|
| Equal to         | =             | `==`   |
| Not equal to     | ≠             | `~=`   |

```lua
print(5 == 5)       -- true
print(4 ~= 10)      -- true
print(3 * 4 == 13)  -- false
print(2 + 2 ~= 4)   -- false
```

Why we'd want to do that will become clear later ☺

---

# Comparing numbers

Checking which of two numbers is smaller or bigger:

| Comparison       | Math notation | Symbol |
|------------------|---------------|--------|
| Smaller than     | <             | `<`    |
| Greater than     | >             | `>`    |
| Smaller or equal | ≤             | `<=`   |
| Greater or equal | ≥             | `>=`   |

```lua
print(4 < 5)       -- true
print(4 > 5)       -- false
print(20 < 20)     -- false
print(10 <= 2 * 5) -- true
print(4 <= 10)     -- true
```

We'll also come back to what "true" and "false" really mean here.

---

# Variables: using memory

A variable:

- is a space in memory
- it has a name
- we can store a value (like a number) in it
- we can retrieve its content later to use other computations

![Storing data in a variable](http://img.c4learn.com/2012/02/Variable-in-Java.jpg)

---

# Storing data in variables

To store a value in a variable, we use the `=` symbol:

```lua
aVariable = 10
anotherVariable = 2 * 3 + 4
```

The computer will compute ("evaluate") what is on the right-hand side, and store the result in the variable whose name is on the left-hand side.

---

# Variable names

Anything you want with the following restrictions:

- contains only letters, numbers or underscores ("_")
- cannot start with a number
- no special letters (like ä, å, ö, é, etc)

Traditional styles for multiple words:

- camel case: `thisIsMyVariable`
- underscores: `this_is_my_variable`

Hint: in small programs, small variables are OK (`a`, `b`, etc.). In bigger ones, try to give them meaningful names, to remember what they represent.

---

# Retreiving values from variables

Simply use the variable name directly (in `print()` or in an operation):

```lua
-- storing
myVariable = 10

-- using
print(myVariable)
print(myVariable + 2)
print(myVariable * myVariable - 1)
```

---

# Retreiving values from variables

You can use as many variables as you need, and store new results in new variables:

```lua
-- simulation of buying a TV
money = 1000
priceOfTelevision = 200
moneyLeftAfterBuying = money - priceOfTelevision

print(money, priceOfTelevision, moneyLeftAfterBuying)
```

---

# Replacing values in variables

The name "variable" means that the value in a variable can change. You can reuse a variable as much as you want:

```lua
a = 10
print(a)    -- 10
a = 20
print(a)    -- 20, the 10 was replaced
```

A common idiom:

```lua
a = 100     -- or whatever
print(a)    -- 100

a = a + 1   -- this is called "incrementing"
print(a)    -- 101
```

---

# Absence of value

A variable that was never used doesn't contain any value. We say it "is nil", or "contains nil":

```lua
print(a)    -- nil
a = 5
print(a)    -- 5
```

Trying to do math with nil will make the interpreter angry:

```lua
a = 5
print(a + b)    -- whoops, b is nil
```

nil is a special value that means "no value", or "this variable is empty".

---

# Forgetting values

The nil value can be assigned to a variable to erase it, using the `nil` keyword

```lua
a = 5
print(a)    -- 5
a = nil
print(a)    -- nil
```

You can also check if a variable is empty by comparing it to nil:

```lua
a = 5
print(a == nil)     -- false
print(b == nil)     -- true
```

In general, you don't need to worry about saving memory or "recycling" variables.

---

# Text

- "character strings" or "strings"
- another type of data that Lua programs can manipulate.
- sequences of characters
- in the source, they are written using `"` (double quotes)

We've already used them for output messages:

```lua
print("This is a string!")
print("This is also a string...")
print("These are ok: äåöÈ")
```

---

# Strings are value

Like any value, strings can be stored in variables and retrieved:

```lua
myString = "Hello"
otherString = "World"
print(myString, otherString)
```

---

# String details

You can also use single quotes `'`:

```lua
a = 'This is also valid'
```

Convenient if you need to put quotes *in* the string:

```lua
print("It's nice!")
print('What is this "string" you speak of?')
```

Strings can be empty:

```lua
print("")   -- well, that was useful...
```

Finally, "long strings" use double square brackets `[[` and `]]`:

```lua
a = [[These can be on
several lines, and contain both
single ' and double " quotes.]]
```

---

# String concatenation

Concatenate is fancy talk for "stick 'em together". It is done using the `..` symbol:

```lua
print("This and " .. "that")
```

name = "Clarice"
print("Hello, " .. name)
```