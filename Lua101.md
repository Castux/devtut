class: middle center

# Lua 101

## Crash course in awesomeness!

---

# Contents

- Before we start
- Numbers
- Memory
- Text
- Truth and logic
- Control flow

---

class: middle

# Before we start

---

# Running the interpreter

- Lua source usually in `source.lua` files
- From the command line: `lua source.lua`
- From a menu (or shortcut) in a Lua-friendly text editor
    - `Tools -> Build` or `Ctrl-B` in Sublime Text
- One program = one Lua file (for now)
- Interpreter reads the whole file and executes it line by line

For very small tests: interactive Lua interpretor

- Windows: Start menu -> search for Lua -> "Lua (Command Line)"
- Others: run `lua` in a terminal

---

# Comments and whitespace

Comments: start with `--`, end at the end of line

- documenting
- separating sections in code
- disabling code temporarily

```lua
-- Here we print some things:
print("Hello world") -- the first thing
print("This is great") -- the second thing
-- print("Not this!")
```

Spaces, tabs and new lines ignored:

```lua
print(       "Hello world"
)print("This is great"          )
```

Good style: one instruction per line, consistent spacing

---

# Basic output: `print()`

An instruction to print something to the console. Used mostly to:

- explain what is going on
- show the result of a computation

```lua
print("Hello, user!")
print("I will now print 5:")
print(5)
print("I'm done, bye!")
```

Can also print several things on the same line (separate them with commas):

```lua
print("The result was", 5, "and I had a blast!")
```

---

class: middle

# Numbers

> If people do not believe that mathematics is simple, it is only because they do not realize how complicated life is. (John von Neumann)

---

# Numbers

The most basic *type* of data you can use in Lua:

```lua
-- let's print some numbers:

print(123)
print(-2)
print(45.024)
print(-999999999.9)
```

Not that fascinating... Let's actually use the CPU.

---

# Basic number operations

| Operation      | Math notation | Symbol |
|----------------|---------------|--------|
| Addition       | +             | `+`    |
| Substraction   | -             | `-`    |
| Multiplication | × or ⋅        | `*`    |
| Division       | /, ÷ or —     | `/`    |

```lua
-- Lua as a simple calculator:

print(3 + 18.5)
print(20 - 5)
print(2763 * 47684)
print(60 / 4)
```

---

# Bigger operations

Can chain the operations as much as you want:

```lua
print(2 + 4 + 6 - 7 + 10 - 8 + 9)
print(3 * 4 * 10 / 2 * 5 / 10)
```

Like in math, `*` and `/` are applied before `+` and `-`:

```lua
print(3 + 4 * 6)    -- 27
```

Like in math, use parentheses `(` and `)` to force the order:

```lua
print((3 + 4) * 6)  -- 42

-- average of 5 numbers:
print((2 + 7 + 4 + 10 + 6) / 5)
```

---

class: middle

# Memory

> A clear conscience is the sure sign of a bad memory. (Mark Twain)

---

# Variables: using memory

A variable:

- is a space in memory
- it has a name
- we can store a value (like a number) in it
- we can retrieve its content later to use other computations

![Storing data in a variable](http://img.c4learn.com/2012/02/Variable-in-Java.jpg)

---

# Storing data in variables

To store a value in a variable, we use the `=` symbol:

```lua
aVariable = 10
anotherVariable = 2 * 3 + 4
```

The computer will compute ("evaluate") what is on the right-hand side, and store the result in the variable whose name is on the left-hand side.

---

# Variable names

Anything you want with the following restrictions:

- contains only letters, numbers or underscores ("_")
- cannot start with a number
- no special letters (like ä, å, ö, é, etc)

Traditional styles for multiple words:

- camel case: `thisIsMyVariable`
- underscores: `this_is_my_variable`

Hint: in small programs, small variables are OK (`a`, `b`, etc.). In bigger ones, try to give them meaningful names, to remember what they represent.

---

# Retreiving values from variables

Simply use the variable name directly (in `print()` or in an operation):

```lua
-- storing
myVariable = 10

-- using
print(myVariable)
print(myVariable + 2)
print(myVariable * myVariable - 1)
```

---

# Retreiving values from variables

You can use as many variables as you need, and store new results in new variables:

```lua
-- simulation of buying a TV
money = 1000
priceOfTelevision = 200
moneyLeftAfterBuying = money - priceOfTelevision

print(money, priceOfTelevision, moneyLeftAfterBuying)
```

---

# Replacing values in variables

The name "variable" means that the value in a variable can change. You can reuse a variable as much as you want:

```lua
a = 10
print(a)    -- 10
a = 20
print(a)    -- 20, the 10 was replaced
```

A common idiom:

```lua
a = 100     -- or whatever
print(a)    -- 100

a = a + 1   -- this is called "incrementing"
print(a)    -- 101
```

---

# Absence of value

A variable that was never used doesn't contain any value. We say it "is nil", or "contains nil":

```lua
print(a)    -- nil
a = 5
print(a)    -- 5
```

Trying to do math with nil will make the interpreter angry:

```lua
a = 5
print(a + b)    -- whoops, b is nil
```

nil is a special value that means "no value", or "this variable is empty".

---

# Forgetting values

The nil value can be assigned to a variable to erase it, using the `nil` keyword

```lua
a = 5
print(a)    -- 5
a = nil
print(a)    -- nil
```

In general, you don't need to worry about saving memory or "recycling" variables.

---

# A bit of vocabulary

These symbols:

```lua
+ - * /
```

are called "operators". They "operate" on numbers. When, in the source code, we combine numbers and/or variables with operators, we form an "expression":

```lua
a + 4 * (b - 200) / c
```

Note: a variable by itself, or a number by itself is also an expression:

```lua
aVariable
100
```

When the interpreter encounters an expression in the code, it will "evaluate" it (compute its value by applying the operators, ie. "do the math").

---

# Expressions

We can put an expression directly in `print()` (to print its value):

```lua
print(200 * 246 - 2)
```

or in the right-hand side of an assignment (to store its value in a variable):

```lua
result = 200 * 246 - 2
```

Later, we'll see other places where we can use expressions.

---

class: middle

# Text

> There is nothing to writing. All you do is sit down at a typewriter and bleed. (Ernest Hemingway)

---

# Text

- "character strings" or "strings"
- another type of data that Lua programs can manipulate.
- sequences of characters
- in the source, they are written using `"` (double quotes)

We've already used them for output messages:

```lua
print("This is a string!")
print("This is also a string...")
print("These are ok: äåöÈ")
```

---

# Strings are values

Like any value, strings can be stored in variables and retrieved:

```lua
myString = "Hello"
otherString = "World"
print(myString, otherString)
```

---

# String details

You can also use single quotes `'`:

```lua
a = 'This is also valid'
```

Convenient if you need to put quotes *in* the string:

```lua
print("It's nice!")
print('What is this "string" you speak of?')
```

Strings can be empty:

```lua
print("")   -- well, that was useful...
```

Finally, "long strings" use double square brackets `[[` and `]]`:

```lua
a = [[These can be on
several lines, and contain both
single ' and double " quotes.]]
```

---

# String concatenation

Concatenate is fancy talk for "stick 'em together". It is done using the `..` operator:

```lua
print("Hello, " .. "world!")
```

It works, of course, with variables that contain strings:

```lua
name = "Clarice"
print("Good evening, " .. name)
```

And like the math operations, you can chain as many as you want:

```lua
name = "Dave"
action = "can't"

print("I'm sorry " .. name .. ", I'm afraid I " ..
    action .. " do that.")
```

---

# Fun with strings

Like with any operation, you can store the results of concatenation back into variables:

```lua
s = "Building a "
s = s .. "string in several "
s = s .. "steps!"

print(s)
```

Numbers can be concatenated to strings (Lua automatically converts the number into its representation as a sequence of characters):

```lua
numberOfCats = 120 * 2

print("I have " .. numberOfCats .. " cats!")
```

Convenient for outputing results of computations, in a nicely formatted message.

---

# String length

To count the number of characters in a string, we use the `#` symbol:

```lua
print(#"Hello!")            -- 6
print(#"This is great!")    -- 14
print(#"")                  -- 0

-- works with variables that contains string too:

aString = "Yeah!"
print(#aString)             -- 5
```

The length operator `#` works only on strings:

```lua
a = 100
print(#a)   -- the length of a number??
```

Note: special characters might count as 2 characters (details are... complex)

```lua
print(#"Å")     -- 2
```

---

# String length: just a number, really!

Note: the result of applying `#` to a string is itself a number, that can be stored and used in computations:

```lua
text = "This is some text."
length = #text

print("The text is " .. length .. " characters long.")
print("The double of that number is " .. length * 2)
```

Vocabulary reminder: `..` and `#` are *operators*. Using them to combine strings and/or numbers forms *expressions*. Expression have *values*, which are computed when the interpreter encounters them (they are *evaluated*).

---

# Types recap

So far, two kinds ("types") of values: numbers and strings, plus the special nil type (which means "no value").

The math operators (`+ - * /`) take numbers and produce new numbers:

```lua
10 + 20     -- the type of this expression is number
```

The concatenation operator `..` takes strings or numbers, and produces new strings:

```lua
"Begining and " .. "end" -- the type of this expression is string
"The result is " .. 100  -- the type of this expression is string
```

And the length operator `#` takes a string, and produces a number:

```lua
#"hello"    -- the type of this expression is number
```

Values (and therefore variables and expressions) have *types*: "what kind of data is this?"

---

class: middle

# Truth and logic

> The truth is rarely pure and never simple. (Oscar Wilde)

---

# Comparing numbers

Checking if numbers are equal or different:

| Comparison       | Math notation | Symbol |
|------------------|---------------|--------|
| Equal to         | =             | `==`   |
| Not equal to     | ≠             | `~=`   |

```lua
print(5 == 5)       -- true
print(4 ~= 10)      -- true
print(3 * 4 == 13)  -- false
print(2 + 2 ~= 4)   -- false
```

Like any operators, `==` and `~=` also work on variables:

```lua
number = 10
print("Is the number equal to 100?", number == 100)
```

The `==` and `~=` operators return a truth value: "is it true, or is it false?": it is the "boolean" type.

---

# Booleans

Another type in Lua, named after mathematician and logician George Boole.

- numbers can take values like 1, -4, 5.5, -90.3, etc.
- strings can take values like "Yeah", "Super duper" or "I have 2 cats!"
- booleans can take exactly two values: true or false

Booleans are values like any other. You can print them:

```lua
print(3 * 10 > 100)     -- false
```

Store them in variables and retrieve them:

```lua
a = 5
b = 5
aVariable = a == b
print(aVariable)    -- true
```

And operate on them (in a few slides from here).

---

# `true` and `false`

Just like:

- we can put numbers directly in the source (`a = 5`)
- we can put strings directly in the source (`print("Super!")`)

we can put booleans directly in the source, using keywords `true` and `false`:

```lua
print(true)		-- true
print(false)	-- false
a = true
print(a)		-- true
a = false
print(a)		-- false
```

Why we'd want to do that will become clear later :)

(*Note: values that appear directly in the source are called "literals"*)

---

# Ordering numbers

Checking which of two numbers is smaller or bigger:

| Comparison       | Math notation | Symbol |
|------------------|---------------|--------|
| Smaller than     | <             | `<`    |
| Greater than     | >             | `>`    |
| Smaller or equal | ≤             | `<=`   |
| Greater or equal | ≥             | `>=`   |

```lua
print(4 < 5)       -- true
print(4 > 5)       -- false
print(20 < 20)     -- false
print(10 <= 2 * 5) -- true
print(4 <= 10)     -- true
```

Vocab recap: `== ~= < > <= >=` are *operators*, they combine variables and numbers into *expressions*. Specifically, they take numbers and produce booleans (truth values).

---

# Recap #2

We've now seen all the basic *types* in Lua:

- numbers
- strings
- booleans
- nil

and how to write them in the source code (*literals*)

```lua
5	-6.5
"A string"	'Another string'
true	false
nil
```

Plus a bunch of operators that can can operate on them:

```lua
+ - * / == ~= < > <= >= .. #
```

---

# Equality

`==` and `~=` work with all the types, not just numbers:

```lua
print(5 == 5)			-- true
print("Foo" == "Foo")	-- true
print("Foo" ~= "Bar")	-- true
print(true == true)		-- true
print(true == false)	-- false
```

Values of different types are never equal, though:

```lua
print(10 == "10")		-- false
```

Comparing to `nil` can be used to check if a variable is empty:

```lua
print(a == nil)		-- true
a = 100
print(a == nil)		-- false
```

---

class: middle

# Control flow

![Calvin and Hobbes](http://sassyhacksaws.com/wp/wp-content/uploads/2012/02/calvin-hobbes-peanut-butter.gif)

---

